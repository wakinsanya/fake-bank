<div class="customer-list__container">
  <h3>Demo Accounts</h3>
  <nb-card
    accent="primary"
    *ngFor="let customer of customers"
    class="customer-list__customer-card"
  >
    <nb-card-header
      >{{ customer.firstName }} {{ customer.lastName }}</nb-card-header
    >
    <nb-card-body>
      <p>Email: {{ customer.email }}</p>
      <div class="customer-list__custom-card__opts__wrap">
        <button
          nbButton
          status="success"
          size="small"
          outline
          (click)="startTransaction(customer._id, transactionDialog)"
        >
          Make a Transaction
        </button>
        <button
          nbButton
          status="danger"
          size="small"
          outline
          (click)="deleteCustomer(customer._id)"
        >
          Delete Account
        </button>
      </div>
    </nb-card-body>
    <nb-card-footer
      >Number of accounts: {{ customer.accounts.length }}</nb-card-footer
    >
  </nb-card>

  <ng-template #welcomeDialog let-ref="dialogRef">
    <nb-card class="customer-list__welcome-dialog">
      <nb-card-header>Welcome to Fake Bank!</nb-card-header>
      <nb-card-body>
        <p>
          This is a distributed electronic banking platform. You can make
          transactions between the demo accounts provided. Each transaction will
          be evaluated by an external api which determines its validity.
        </p>
      </nb-card-body>
      <nb-card-footer>
        <button nbButton status="success" (click)="ref.close()">Got it</button>
      </nb-card-footer>
    </nb-card>
  </ng-template>

  <ng-template #transactionDialog let-ref="dialogRef">
    <nb-card
      class="customer-list__welcome-dialog"
      [nbSpinner]="isLoadingTransactionData"
      nbSpinnerMessage="working"
    >
      <nb-card-header>Your Accounts</nb-card-header>
      <nb-card-body>

      </nb-card-body>
      <nb-card-footer>
        <button nbButton status="success" (click)="ref.close()">Got it</button>
      </nb-card-footer>
    </nb-card>
  </ng-template>
</div>
